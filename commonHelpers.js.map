{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('.body-elements')\nconst imagesList = document.querySelector('.images-list');\n\nconst loader = document.querySelector('.loader')\n\nconst BASE_URL = ''\nconst API_KEY = \"27271649-0bf2f3b05194a9267cfa0a660\"\nconst url = new URL(BASE_URL);\nurl.searchParams.append(\"key\", API_KEY)\nurl.searchParams.append('image_type', 'photo')\nurl.searchParams.append('orientation', 'horizontal')\nurl.searchParams.append('safesearch', 'true')\nurl.searchParams.append('q', 'cat')\n\nloader.style.display = 'none';\n\nform.addEventListener('submit', (event) => {\n    event.preventDefault();\n\n    loader.style.display = 'block';\n    \n    imagesList.innerHTML = '';\n\n    const query = event.currentTarget.elements.inputValue.value;\n\n    renderImages(query);\n\n    event.currentTarget.reset()\n})\n\nfunction getImage(quary) {\n    \n    url.searchParams.set('q', quary);\n    return fetch(url)\n        .then((res) => {\n            if (res.ok) {\n                return res.json()\n            } else {\n                throw new Error('Request is ot OK.')\n            }\n        }).catch(error => {\n            iziToast.error({\n                    position: 'center',\n                    title: '',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n});\n        })\n};\n\nfunction renderImages(quary) {\n    getImage(quary)\n        .then(image => {\n            imagesList.insertAdjacentHTML(\"afterbegin\", createImageHTML(image))\n            lightbox.refresh()\n            if (image.hits.length === 0) {\n                iziToast.error({\n                    position: 'center',\n                    title: '',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n});\n            }\n        })\n        .catch(error => {\n        iziToast.error({\n                    position: 'center',\n                    title: '',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n});\n    })\n    \n};\n\nfunction createImageHTML(image) {\n    const imagesHTML = image.hits.reduce((html, hit) => {\n        html += `\n            <div class=\"card gallery\">\n                    \n                <a class=\"large-img\" href=\"${hit.largeImageURL}\">\n                    <img width=\"300\" height=\"200\" alt=\"${hit.tags}\" src=\"${hit.webformatURL}\">\n                </a>\n\n                <div class=\"card-elems\">\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Likes</h2>\n                        <p class=\"card-text\">${hit.likes}</p>\n                    </div>\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Views</h2>\n                        <p class=\"card-text\">${hit.views}</p>\n                    </div>\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Comments</h2>\n                        <p class=\"card-text\">${hit.comments}</p>\n                    </div>\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Downloads</h2>\n                        <p class=\"card-text\">${hit.downloads}</p>\n                    </div>\n                </div>\n            </div>\n        `;\n        return html;\n    }, '');\n\n    return imagesHTML;\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: \"alt\",\n        captionDelay: 250,\n        captionPosition:'bottom'\n    });\n\n"],"names":["form","imagesList","loader","BASE_URL","API_KEY","url","event","query","renderImages","getImage","quary","res","error","iziToast","image","createImageHTML","lightbox","html","hit","SimpleLightbox"],"mappings":"6vBAMA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,GACXC,EAAU,qCACVC,EAAM,IAAI,IAAIF,CAAQ,EAC5BE,EAAI,aAAa,OAAO,MAAOD,CAAO,EACtCC,EAAI,aAAa,OAAO,aAAc,OAAO,EAC7CA,EAAI,aAAa,OAAO,cAAe,YAAY,EACnDA,EAAI,aAAa,OAAO,aAAc,MAAM,EAC5CA,EAAI,aAAa,OAAO,IAAK,KAAK,EAElCH,EAAO,MAAM,QAAU,OAEvBF,EAAK,iBAAiB,SAAWM,GAAU,CACvCA,EAAM,eAAc,EAEpBJ,EAAO,MAAM,QAAU,QAEvBD,EAAW,UAAY,GAEvB,MAAMM,EAAQD,EAAM,cAAc,SAAS,WAAW,MAEtDE,EAAaD,CAAK,EAElBD,EAAM,cAAc,MAAO,CAC/B,CAAC,EAED,SAASG,EAASC,EAAO,CAErB,OAAAL,EAAI,aAAa,IAAI,IAAKK,CAAK,EACxB,MAAML,CAAG,EACX,KAAMM,GAAQ,CACX,GAAIA,EAAI,GACJ,OAAOA,EAAI,KAAM,EAEjB,MAAM,IAAI,MAAM,mBAAmB,CAEnD,CAAS,EAAE,MAAMC,GAAS,CACdC,EAAS,MAAM,CACP,SAAU,SACV,MAAO,GACP,QAAS,0EAC7B,CAAC,CACD,CAAS,CACT,CAEA,SAASL,EAAaE,EAAO,CACzBD,EAASC,CAAK,EACT,KAAKI,GAAS,CACXb,EAAW,mBAAmB,aAAcc,EAAgBD,CAAK,CAAC,EAClEE,EAAS,QAAS,EACdF,EAAM,KAAK,SAAW,GACtBD,EAAS,MAAM,CACX,SAAU,SACV,MAAO,GACP,QAAS,0EAC7B,CAAC,CAED,CAAS,EACA,MAAMD,GAAS,CAChBC,EAAS,MAAM,CACH,SAAU,SACV,MAAO,GACP,QAAS,0EAC7B,CAAC,CACD,CAAK,CAEL,CAEA,SAASE,EAAgBD,EAAO,CAgC5B,OA/BmBA,EAAM,KAAK,OAAO,CAACG,EAAMC,KACxCD,GAAQ;AAAA;AAAA;AAAA,6CAG6BC,EAAI;AAAA,yDACQA,EAAI,cAAcA,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAMhCA,EAAI;AAAA;AAAA;AAAA;AAAA,+CAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,+CAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,+CAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,UAKpCD,GACR,EAAE,CAGT,CAEA,MAAMD,EAAW,IAAIG,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,IACd,gBAAgB,QACxB,CAAK"}