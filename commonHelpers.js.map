{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from 'axios';\n\n\n\n\nconst form = document.querySelector('.body-elements')\nconst imagesList = document.querySelector('.images-list');\n\nconst loader = document.querySelector('.loader')\n\nconst loadBtn = document.querySelector('.load-more-btn')\n\nconst BASE_URL = 'https://pixabay.com/api/'\nconst API_KEY = \"27271649-0bf2f3b05194a9267cfa0a660\"\nconst url = new URL(BASE_URL);\nurl.searchParams.append(\"key\", API_KEY)\nurl.searchParams.append('image_type', 'photo')\nurl.searchParams.append('orientation', 'horizontal')\nurl.searchParams.append('safesearch', 'true')\nurl.searchParams.append('page', '1')\nurl.searchParams.append('per_page', '40')\n\n\n\nloader.style.display = 'none';\nloadBtn.style.display = 'none';\n\nconst scrollPage = () => {\n     const cardEl = document.querySelector('.card');\n                const cardRect = cardEl.getBoundingClientRect();\n                const cardHeight = cardRect.height;\n\n                window.scrollTo({\n                    top: window.scrollY + cardHeight * 2,\n                    behavior: 'smooth',\n                });\n}\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    loader.style.display = 'block';\n    \n    imagesList.innerHTML = '';\n\n    const query = event.currentTarget.elements.inputValue.value.trim();\n\n    if (query !== '') {\n            await renderImages(query);\n    } else {\n        iziToast.info({\n                    position: 'center',\n                    title: '',\n                    message: 'Please fill in the input field',\n        });\n        loader.style.display = 'none';\n    }\n    \n    event.currentTarget.reset()\n})\n\nloadBtn.addEventListener('click', async () => {\n        const query = form.elements.inputValue.value;\n\n        await renderImages(query);\n\n        await scrollPage()\n\n        });\n\n\n\nasync function getImage(query) {\n    url.searchParams.set('q', query);\n    try {\n        const res = await axios.get(url);\n        return res.data;\n    } catch (error) {\n        iziToast.error({\n            position: 'center',\n            title: '',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        throw error;\n    }\n};\n\n\n\n\nasync function renderImages(quary) {\n    let page = 1;\n    try {\n        const image = await getImage(quary);\n            \n             imagesList.insertAdjacentHTML(\"beforeend\", createImageHTML(image))\n\n            lightbox.refresh()\n\n            page += 1\n\n            if (image.hits.length === 0) {\n                iziToast.error({\n                    position: 'center',\n                    title: '',\n                    message: 'Error. Please try again!',});\n        }\n\n            if (page >= Math.ceil(image.totalHits / 40)) {\n                iziToast.info({\n                        position: 'center',\n                        title: '',\n                    message: \"We're sorry, but you've reached the end of search results.\",});\n                loadBtn.style.display = 'none';\n                return\n        } \n        \n        }\n        catch(error)  {\n        iziToast.error({\n                    position: 'center',\n                    title: '',\n                    message: 'Error. Please try again!',});\n        loadBtn.style.display = 'none';\n    } \n    \n    \n    \n    loadBtn.style.display = 'block';\n    loader.style.display = 'none';\n    \n};\n\n\n\n\nfunction createImageHTML(image) {\n    const imagesHTML = image.hits.reduce((html, hit) => {\n        html += `\n            <div class=\"card gallery\">\n                    \n                <a class=\"large-img\" href=\"${hit.largeImageURL}\">\n                    <img width=\"300\" height=\"200\" alt=\"${hit.tags}\" src=\"${hit.webformatURL}\">\n                </a>\n\n                <div class=\"card-elems\">\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Likes</h2>\n                        <p class=\"card-text\">${hit.likes}</p>\n                    </div>\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Views</h2>\n                        <p class=\"card-text\">${hit.views}</p>\n                    </div>\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Comments</h2>\n                        <p class=\"card-text\">${hit.comments}</p>\n                    </div>\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Downloads</h2>\n                        <p class=\"card-text\">${hit.downloads}</p>\n                    </div>\n                </div>\n            </div>\n        `;\n        return html;\n    }, '');\n\n    return imagesHTML;\n};\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: \"alt\",\n        captionDelay: 250,\n        captionPosition:'bottom'\n    });\n\n"],"names":["form","imagesList","loader","loadBtn","BASE_URL","API_KEY","url","scrollPage","cardHeight","event","query","renderImages","iziToast","getImage","axios","error","quary","page","image","createImageHTML","lightbox","html","hit","SimpleLightbox"],"mappings":"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"}