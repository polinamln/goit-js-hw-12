{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from 'axios';\n\n\n\n\nconst form = document.querySelector('.body-elements')\nconst imagesList = document.querySelector('.images-list');\n\nconst loader = document.querySelector('.loader')\n\nconst loadBtn = document.querySelector('.load-more-btn')\n\nconst BASE_URL = 'https://pixabay.com/api/'\nconst API_KEY = \"27271649-0bf2f3b05194a9267cfa0a660\"\nconst url = new URL(BASE_URL);\nurl.searchParams.append(\"key\", API_KEY)\nurl.searchParams.append('image_type', 'photo')\nurl.searchParams.append('orientation', 'horizontal')\nurl.searchParams.append('safesearch', 'true')\nurl.searchParams.append('page', '1')\nurl.searchParams.append('per_page', '40')\n\n\n\nloader.style.display = 'none';\nloadBtn.style.display = 'none';\n\nconst scrollPage = () => {\n     const cardEl = document.querySelector('.card');\n                const cardRect = cardEl.getBoundingClientRect();\n                const cardHeight = cardRect.height;\n\n                window.scrollTo({\n                    top: window.scrollY + cardHeight * 2,\n                    behavior: 'smooth',\n                });\n}\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    loader.style.display = 'block';\n    \n    imagesList.innerHTML = '';\n\n    const query = event.currentTarget.elements.inputValue.value;\n\n    if (query !== '') {\n            await renderImages(query);\n    } else {\n        iziToast.info({\n                    position: 'center',\n                    title: '',\n                    message: 'Please fill in the input field',\n});\n    }\n    \n\n    event.currentTarget.reset()\n})\n\nloadBtn.addEventListener('click', async () => {\n        const query = form.elements.inputValue.value;\n\n        await renderImages(query);\n\n        await scrollPage()\n\n        });\n\n\nfunction getImage(quary) {\n    url.searchParams.set('q', quary);\n    return axios.get(url)\n        .then((res) => {\n            return res.data\n        })\n        .catch(error => {\n            iziToast.error({\n                    position: 'center',\n                    title: '',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n});\n        })\n};\n\n\nasync function renderImages(quary) {\n    let page = 1;\n     \n    try {\n        const image = await getImage(quary);\n            \n             imagesList.insertAdjacentHTML(\"beforeend\", createImageHTML(image))\n\n            lightbox.refresh()\n\n            page += 1\n\n            if (image.hits.length === 0) {\n                iziToast.error({\n                    position: 'center',\n                    title: '',\n                    message: 'Error. Please try again!',\n});\n        }\n        \n            if (page >= Math.ceil(image.totalHits / 40)) {\n                iziToast.info({\n                        position: 'center',\n                        title: '',\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                });\n                loadBtn.style.display = 'none';\n        } \n        \n        }\n        catch(error)  {\n        iziToast.error({\n                    position: 'center',\n                    title: '',\n                    message: 'Error. Please try again!',\n});\n        }\n    \n    \n    loadBtn.style.display = 'block';\n    loader.style.display = 'none';\n\n};\n\n\n\n\nfunction createImageHTML(image) {\n    const imagesHTML = image.hits.reduce((html, hit) => {\n        html += `\n            <div class=\"card gallery\">\n                    \n                <a class=\"large-img\" href=\"${hit.largeImageURL}\">\n                    <img width=\"300\" height=\"200\" alt=\"${hit.tags}\" src=\"${hit.webformatURL}\">\n                </a>\n\n                <div class=\"card-elems\">\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Likes</h2>\n                        <p class=\"card-text\">${hit.likes}</p>\n                    </div>\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Views</h2>\n                        <p class=\"card-text\">${hit.views}</p>\n                    </div>\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Comments</h2>\n                        <p class=\"card-text\">${hit.comments}</p>\n                    </div>\n                    <div class=\"card-text-el\">\n                        <h2 class=\"card-title\">Downloads</h2>\n                        <p class=\"card-text\">${hit.downloads}</p>\n                    </div>\n                </div>\n            </div>\n        `;\n        return html;\n    }, '');\n\n    return imagesHTML;\n};\n\n\n\n\n\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: \"alt\",\n        captionDelay: 250,\n        captionPosition:'bottom'\n    });\n\n"],"names":["form","imagesList","loader","loadBtn","BASE_URL","API_KEY","url","scrollPage","cardHeight","event","query","renderImages","iziToast","getImage","quary","axios","res","error","page","image","createImageHTML","lightbox","html","hit","SimpleLightbox"],"mappings":"+vBAWA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAU,SAAS,cAAc,gBAAgB,EAEjDC,EAAW,2BACXC,EAAU,qCACVC,EAAM,IAAI,IAAIF,CAAQ,EAC5BE,EAAI,aAAa,OAAO,MAAOD,CAAO,EACtCC,EAAI,aAAa,OAAO,aAAc,OAAO,EAC7CA,EAAI,aAAa,OAAO,cAAe,YAAY,EACnDA,EAAI,aAAa,OAAO,aAAc,MAAM,EAC5CA,EAAI,aAAa,OAAO,OAAQ,GAAG,EACnCA,EAAI,aAAa,OAAO,WAAY,IAAI,EAIxCJ,EAAO,MAAM,QAAU,OACvBC,EAAQ,MAAM,QAAU,OAExB,MAAMI,EAAa,IAAM,CAGT,MAAMC,EAFF,SAAS,cAAc,OAAO,EACV,wBACI,OAE5B,OAAO,SAAS,CACZ,IAAK,OAAO,QAAUA,EAAa,EACnC,SAAU,QAC9B,CAAiB,CACjB,EAEAR,EAAK,iBAAiB,SAAU,MAAOS,GAAU,CAC7CA,EAAM,eAAc,EAEpBP,EAAO,MAAM,QAAU,QAEvBD,EAAW,UAAY,GAEvB,MAAMS,EAAQD,EAAM,cAAc,SAAS,WAAW,MAElDC,IAAU,GACN,MAAMC,EAAaD,CAAK,EAE5BE,EAAS,KAAK,CACF,SAAU,SACV,MAAO,GACP,QAAS,gCAC7B,CAAC,EAIGH,EAAM,cAAc,MAAO,CAC/B,CAAC,EAEDN,EAAQ,iBAAiB,QAAS,SAAY,CACtC,MAAMO,EAAQV,EAAK,SAAS,WAAW,MAEvC,MAAMW,EAAaD,CAAK,EAExB,MAAMH,EAAY,CAE1B,CAAS,EAGT,SAASM,EAASC,EAAO,CACrB,OAAAR,EAAI,aAAa,IAAI,IAAKQ,CAAK,EACxBC,EAAM,IAAIT,CAAG,EACf,KAAMU,GACIA,EAAI,IACd,EACA,MAAMC,GAAS,CACZL,EAAS,MAAM,CACP,SAAU,SACV,MAAO,GACP,QAAS,0EAC7B,CAAC,CACD,CAAS,CACT,CAGA,eAAeD,EAAaG,EAAO,CAC/B,IAAII,EAAO,EAEX,GAAI,CACA,MAAMC,EAAQ,MAAMN,EAASC,CAAK,EAE7Bb,EAAW,mBAAmB,YAAamB,EAAgBD,CAAK,CAAC,EAElEE,EAAS,QAAS,EAElBH,GAAQ,EAEJC,EAAM,KAAK,SAAW,GACtBP,EAAS,MAAM,CACX,SAAU,SACV,MAAO,GACP,QAAS,0BAC7B,CAAC,EAGeM,GAAQ,KAAK,KAAKC,EAAM,UAAY,EAAE,IACtCP,EAAS,KAAK,CACN,SAAU,SACV,MAAO,GACP,QAAS,4DACjC,CAAiB,EACDT,EAAQ,MAAM,QAAU,OAG/B,MACD,CACAS,EAAS,MAAM,CACH,SAAU,SACV,MAAO,GACP,QAAS,0BAC7B,CAAC,CACQ,CAGLT,EAAQ,MAAM,QAAU,QACxBD,EAAO,MAAM,QAAU,MAE3B,CAKA,SAASkB,EAAgBD,EAAO,CAgC5B,OA/BmBA,EAAM,KAAK,OAAO,CAACG,EAAMC,KACxCD,GAAQ;AAAA;AAAA;AAAA,6CAG6BC,EAAI;AAAA,yDACQA,EAAI,cAAcA,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAMhCA,EAAI;AAAA;AAAA;AAAA;AAAA,+CAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,+CAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,+CAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,UAKpCD,GACR,EAAE,CAGT,CAQA,MAAMD,EAAW,IAAIG,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,IACd,gBAAgB,QACxB,CAAK"}